<div class="mt-2">
  <h2 class="fs-5 text-black mt-2">Migrar portafolio</h2>
  <p class="text-muted mt-2">Seleccione el portafolio o familia a la cual vas a migrar</p>
</div>
<div *ngIf="isLoading"
     class="d-flex justify-content-center align-items-center">
  <div class="d-flex flex-column align-items-center">
    <div class="spinner-border text-orange"
         role="status"
         style="width: 5rem; height: 5rem;">
    </div>
    <span class="mt-3 fs-4 text-orange">Cargando...</span>
  </div>
</div>


<div *ngIf="!isLoading">

  <p-accordion>

    <p-accordionTab *ngFor="let family of availablePortafolios"
                    [header]="family.name">
      <div class="scrollable-table-container">
        <p-table [value]="family.packageList"
                 [paginator]="false">
          <ng-template pTemplate="header">
            <tr>
              <th></th>
              <th class="text-center">Nombre</th>
              <th class="text-center">Descripción</th>
              <th class="text-center">Precio</th>
              <th class="text-center">N° Cuotas</th>
              <th class="text-center">Cuota Inicial</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body"
                       let-pkg>
            <tr>
              <td>
                <app-radios class="w-100 align-items-center"
                            [form]="form"
                            controlName="packageDetailId"
                            [verticalLayout]="true"
                            [horizontalLayout]="true"
                            [options]="[{content: '', value: pkg.idPackage}]"
                            [idFamilyPackage]="'pkg-list-' + pkg.idPackage"
                            (changeSelection)="onPackageSelection($event)">
                </app-radios>
              </td>
              <td class="text-center">{{ pkg.name }}</td>
              <td class="text-center">{{ pkg.description }}</td>
              <td class="text-center">{{ pkg.packageDetail[0]?.price | currency: 'USD' }}</td>
              <td class="text-center">{{ pkg.packageDetail[0]?.numberQuotas }}</td>
              <td class="text-center">{{ pkg.packageDetail[0]?.initialPrice | currency: 'USD' }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-accordionTab>
  </p-accordion>
</div>
<div class="d-flex flex-column flex-md-row  justify-content-center p-4 gap-2">
  <button class="btn btn-outline-secondary custom-button"
          type="button"
          (click)="goBack()">
    Atrás
  </button>
  <button class="btn btn-secondary"
          type="button"
          (click)="onClickButton()">
    Siguiente
  </button>
</div>
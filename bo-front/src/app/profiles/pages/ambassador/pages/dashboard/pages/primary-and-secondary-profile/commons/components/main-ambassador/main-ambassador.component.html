<div [ngClass]="{'container-ambassador': !typePosition}">

  <!-- otros elementos del padre -->

  <nav class="d-flex flex-row bg-white w-100 justify-content-center top-0 start-0 ps-4 pt-3"
  [ngClass]="{'position-absolute': typePosition}">
    <button class="nav-text px-2 p-lg-2 rounded-5 text-center w-100" 
      [class.text-light]="isState"
      [class.fw-medium]="isState"
      [ngStyle]="{ 'background-color': isState ? 'var(--bs-primary)' : 'white' }"
      (click)="isState = true">
      Compuesto
    </button>
    <button class="nav-text px-2 p-lg-2 rounded-5 text-center w-100" 
      [class.text-light]="!isState"
      [class.fw-medium]="!isState"
      [ngStyle]="{ 'background-color': !isState ? 'var(--bs-primary)' : 'white' }"
      (click)="isState = false">
      Residual
    </button>
  </nav>

  <!-- Md  -->
  <ng-container *ngIf="isState">
    <div class="d-flex flex-column gap-2 mt-4 rounded-4 shadow  p-3">
      <div class="d-flex align-items-center justify-content-between p-2">
        <h4 class="m-0 custom-text fw-normal p-2">Detalle del puntaje</h4>
        <span class="p-1 rounded-4 px-2 custom-color-range">Rango compuesto</span>
      </div>
      <div>
        <div class="d-flex flex-column flex-md-row gap-3">
          <app-score-details currentRangeTitle="Rango actual" typeOfRange="Composite" typeOfLevel="Current"
            [nextRangeData]="nextRangeData" [pointRangesDataToChild]="pointRangesDataToChild" [rangeData]="rangeData"
            [colors]="colors" [getColorByRangeId]="getColorByRangeId.bind(this)"
            [getTextColorByRangeId]="getTextColorByRangeId.bind(this)" [getGradientColor]="getGradientColor.bind(this)"
            [cardLoading]="cardLoading">
          </app-score-details>
          <app-score-details currentRangeTitle="Proximo rango" typeOfRange="Composite" typeOfLevel="Next"
            [nextRangeData]="nextRangeData" [pointRangesDataToChild]="pointRangesDataToChild" [rangeData]="rangeData"
            [colors]="colors" [getColorByRangeId]="getColorByRangeId.bind(this)"
            [getTextColorByRangeId]="getTextColorByRangeId.bind(this)" [getGradientColor]="getGradientColor.bind(this)"
            [cardLoading]="cardLoading">
          </app-score-details>
        </div>
        <div class="d-flex flex-row justify-content-between p-4 rounded-4 bg-white-lilac mt-4">
          <ng-container *ngIf="cardLoading">
            <div class="progress-spinner-container-v2">
              <p-progressSpinner [style]="{ width: '3rem', height: '3rem' }"></p-progressSpinner>
            </div>
          </ng-container>
          <ng-container *ngIf="!cardLoading">
            <div class="d-flex flex-row gap-1 gap-lg-3">
              <img src="assets/icons/trofeo.svg" alt="trofeo" />
              <div class="d-flex flex-column justify-content-center align-items-start">
                <h5 class="mb-0 custom-default">Máximo logro</h5>
                <span>Rango {{ rangeData?.rango }} </span>
              </div>
            </div>
            <img [src]="
              'https://s3.us-east-2.amazonaws.com/backoffice.documents/Ranges/' +
              formatRangeName(rangeData?.rango) + '.png'
              " alt="Rango Actual" style="width: 64px; height: 64px" />
          </ng-container>
        </div>

      </div>
    </div>
    <div class="w-100 d-flex flex-column gap-2 rounded-4 shadow p-2 p-3">
      <ng-container *ngIf="cardLoading">
        <div class="progress-spinner-container">
          <p-progressSpinner [style]="{ width: '3rem', height: '3rem' }"></p-progressSpinner>
        </div>
      </ng-container>
      <ng-container *ngIf="!cardLoading">
        <div class="d-flex align-items-center justify-content-between p-2">
          <h4 class="m-0 custom-text fw-normal">Estado del socio</h4>
          <span class="p-1 rounded-4 px-2 custom-color-range">Rango compuesto</span>
        </div>
        <div class="d-flex flex-wrap w-100 gap-3">
          <app-review-state [isRefreshingPoints]="isRefreshingPoints" [isRefreshingBonus]="isRefreshingBonus"
            (refreshPointsRequested)="refreshPoints()" (refreshBonusRequested)="refreshSingleBonus()"
            [volTotal]="volTotal" [puntajeDeLaMembresia]="puntajeDeLaMembresia" tipo="Compuesto" [isLoading]="isLoading"
            [singleBonus]="singleBonus" [numberTotal]="numberTotal"></app-review-state>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <ng-container *ngIf="!isState">
    <div class="d-flex flex-column gap-2 mt-4 rounded-4 shadow p-3" style="margin: 0 auto;">
      <div class="d-flex align-items-center justify-content-between p-1 p-lg-2">
        <h4 class="m-0 custom-text fw-normal">Detalle del puntaje</h4>
        <span class="p-1 rounded-4 px-2 custom-color-range">Rango residual</span>
      </div>
      <div class="">
        <div class="d-flex flex-column flex-md-row justify-content-center gap-3">
          <app-score-details currentRangeTitle="Rango actual" typeOfRange="Residual" typeOfLevel="Current"
            [nextRangeData]="nextRangeData" [pointRangesDataToChild]="pointRangesDataToChild" [rangeData]="rangeData"
            [colors]="colors" [getColorByRangeId]="getColorByRangeId.bind(this)"
            [getTextColorByRangeId]="getTextColorByRangeId.bind(this)" [getGradientColor]="getGradientColor.bind(this)"
            [cardLoading]="cardLoading">
          </app-score-details>
          <app-score-details currentRangeTitle="Proximo rango" typeOfRange="Residual" typeOfLevel="Next"
            [nextRangeData]="nextRangeData" [pointRangesDataToChild]="pointRangesDataToChild" [rangeData]="rangeData"
            [colors]="colors" [getColorByRangeId]="getColorByRangeId.bind(this)"
            [getTextColorByRangeId]="getTextColorByRangeId.bind(this)" [getGradientColor]="getGradientColor.bind(this)"
            [cardLoading]="cardLoading">
          </app-score-details>
        </div>
        <div class="d-flex flex-row justify-content-between p-4 rounded-4 bg-white-lilac mt-4">
          <div class="d-flex flex-row gap-3">
            <img src="assets/icons/trofeo.svg" alt="trofeo" />
            <div class="d-flex flex-column justify-content-center align-items-start custom-default">
              <h5 class="mb-0 custom-default">Máximo logro</h5>
              <span class="custom-default">Rango {{ rangeData?.rango }} </span>
            </div>
          </div>
          <img [src]="
              'https://s3.us-east-2.amazonaws.com/backoffice.documents/Ranges/' +
              formatRangeName(rangeData.rango) + '.png'
              " alt="Rango Actual" style="width: 64px; height: 64px" />
        </div>
      </div>
      <div class="w-100 d-flex flex-column gap-2 rounded-4 shadow p-2 p-3">
        <div class="d-flex align-items-center justify-content-between p-2">
          <h4 class="m-0 fs-4">Estado del socio</h4>
          <span class="p-1 rounded-4 px-2 custom-color-range">Rango residual</span>
        </div>
        <div class="d-flex flex-wrap w-100 gap-3 mt-4">
          <app-review-state [isRefreshingPoints]="isRefreshingPoints" [isRefreshingBonus]="isRefreshingBonus"
            (refreshPointsRequested)="refreshPoints()" (refreshBonusRequested)="refreshSingleBonus()"
            [volTotal]="volTotal" [puntajeDeLaMembresia]="puntajeDeLaMembresia" tipo="Residual" [isLoading]="isLoading"
            [singleBonus]="singleBonus" [numberTotal]="numberTotal"></app-review-state>
        </div>
      </div>

    </div>
  </ng-container>

</div>
<div *ngIf="loading" class="d-flex justify-content-center align-items-center" style="min-height: 150px">
	<p-progressSpinner [style]="{ width: '2rem', height: '2rem' }" strokeWidth="3" fill="var(--surface-ground)"
		animationDuration=".7s"></p-progressSpinner>
	<span class="ms-2">Actualizando...</span>
</div>
<div *ngIf="!loading" class="operaciones-container mb-3">

	<div class="operaciones-header">
		<div class="header-operaciones">Operaciones</div>
		<div class="header-fecha">Fecha</div>
	</div>

	<div class="operacion-item" *ngFor="let d of table.data; let i = index" (click)="toggleDetalle($event, i)">
		<div class="operacion-contenido">
			<div class="operacion-descripcion">
				<div class="operacion-titulo">{{d.returnedType}}</div>
				<div class="operacion-codigo">Op. N° {{d.id}}</div>
			</div>
			<div>
				<div class="operacion-price" [ngStyle]="{ color: d.amount < 0 ? '#dc3545' : '#363A3E' }">
					{{ formatAmount(d.amount) }}

				</div>
				<div class="operacion-fecha">{{d.dateInitial}}</div>
			</div>
		</div>

		<div #detalle class="operacion-detalle">
			<div class="detalle-seccion">
				<div class="detalle-item">
					<div class="detalle-titulo">Fecha del movimiento</div>
					<span class="detalle-valor">{{d.dateFinal}}</span>
				</div>
				<div class="detalle-item " *ngIf="navigation==3 ">
					<div class="detalle-titulo">Titular</div>
					<span class="detalle-valor">{{user.name}}</span>
				</div>
				<div class="detalle-item " *ngIf="navigation==3 ">
					<div class="detalle-titulo">Destino</div>
					<span class="detalle-valor">{{d.description}}</span>
				</div>
				<div class="detalle-item " *ngIf="navigation==3 ">
					<div class="detalle-titulo">Cuenta</div>
					<span class="detalle-valor">{{d.description}}</span>
				</div>

				<div class="detalle-item " *ngIf="navigation !=3 ">
					<span class="detalle-titulo">Tipo de operación</span>
					<span class="detalle-valor">{{d.returnedType}}</span>
				</div>
				<div *ngIf="navigation == 2" class="detalle-item">
					<span class="detalle-titulo">Tipo de Cuenta</span>
					<span class="detalle-valor">Dolares</span>
				</div>

				<div class="detalle-item">
					<span class="detalle-titulo"> {{navigation ==3 ? 'Nro. de operación' : 'Cód. de operación'}}</span>
					<span class="detalle-valor">{{d.id}}</span>
				</div>
				<div class="detalle-item">
					<div class="row" style="width: 110%;">
						<div class="col-12 col-lg-6">
							<span class="detalle-titulo">Descripcion</span>
						</div>
						<div class="col-12 col-lg-6 d-flex justify-content-end  text-end">
							<span class="detalle-titulo">
								{{ d.description }}
							</span>
						</div>
					</div>
				</div>
				<div class=" detalle-item" *ngIf="navigation !=3 ">
					<span class="detalle-titulo">Monto</span>
					<span class="detalle-valor"> {{ formatAmount(d.amount) }}</span>
				</div>
				<div *ngIf="navigation != 1" class="detalle-item">
					<span class="detalle-titulo">solicitud</span>
					<span class="detalle-valor {{ d.solicitud ? 'estado-completada' : 'estado-error' }}"
						style="border-radius: 12px; padding: 3px;">{{d.solicitud == true ?
						'Completada':'Error' }}</span>
				</div>
			</div>
		</div>
	</div>
</div>
<app-pagination-ng-prime  *ngIf="!loading" [rows]="rows" [totalRecords]="totalRecords"
	[rowsPerPageOptions]="[10, 20, 30]" [align]="align" (pageChange)="onPageChange($event)">
</app-pagination-ng-prime>
<ng-container *ngIf="table.data.length > 0">
	<app-event-emitter [data]="table.data" (dataChange)="emitTransactionData($event)"></app-event-emitter>
</ng-container>
<!--tabla antigua-->
<!-- <div class="d-flex flex-column gap-3">
	<div class="d-flex flex-row justify-content-between align-items-center">
		<app-pagination-ng-prime [rows]="rows" [totalRecords]="totalRecords" [rowsPerPageOptions]="[10, 20, 30]"
			[align]="align" (pageChange)="onPageChange($event)" (refresh)="onRefresh($event)">
		</app-pagination-ng-prime>
	</div>

	<app-table class="w-100" [headers]="['Fecha', 'Tipo de Operación', 'Descripción', 'Monto', 'Acciones']"
		[minWidthHeader]="[170, 280, 550, 100, 100]" [hasCheckbox]="false" [minWidth]="1500" [customRows]="true"
		[loading]="loading" [hasData]="table.data.length > 0">
		<tr class="w-100 d-flex flex-row align-items-center" *ngFor="let d of table.data; let i = index">
			<th class="table__first__v1 d-flex flex-row justify-content-center align-items-center">
				<label class="form-check-label fw-normal cl-muted m-0 mt-1" [for]="'t-a-t-p-list-' + i">{{
					i + 1
					}}</label>
			</th>
			<td class="fs-6 py-4 px-4 text-center w-100" style="min-width: 170px">
				{{ d.dateInitial }}
			</td>
			<td class="fs-6 py-4 px-4 w-100 text-center" style="min-width: 280px">
				{{ d.returnedType }}
			</td>
			<td class="fs-6 py-4 px-4 w-100 text-center" style="min-width: 550px">
				{{ d.description }}
			</td>
			<td class="fs-6 py-4 px-4 w-100 text-center" style="min-width: 100px"
				[ngStyle]="{ color: d.amount < 0 ? '#dc3545' : 'inherit' }">
				{{ formatAmount(d.amount) }}
			</td>
			<td class="fs-6 py-4 px-4 w-100 text-center" style="min-width: 100px">
				<button pButton icon="pi pi-eye" label="Ver más"
					class="btn btn-text text-primary d-flex align-items-center" (click)="onClickBtn(d.id)"></button>
			</td>
		</tr>
	</app-table>
	<ng-container *ngIf="table.data.length > 0">
		<app-event-emitter [data]="table.data" (dataChange)="emitTransactionData($event)"></app-event-emitter>
	</ng-container>
</div> -->
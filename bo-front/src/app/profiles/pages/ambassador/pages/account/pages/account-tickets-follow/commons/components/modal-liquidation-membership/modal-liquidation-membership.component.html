<app-modal title="">
	<ng-container *ngIf="screen === 1">
		<div class="w-100 d-flex flex-column gap-3">
			<div class="d-flex flex-row gap-4" style="align-self: center;">
				<h1 class="fs-6 fw-medium m-0 text-black pb-2">Liquidación de membresía</h1>
			</div>
			<label for="info" class="text-black font-weight-bold" style="font-size: 16px;">Información del usuario</label>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Usuario</span>
				<span class="fw-medium">{{ currentUser.username }}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Nombre y Apellido</span>
				<span class="fw-medium">{{ currentUser.lastName + ' ' + currentUser.name }}</span>
			</div>
			<app-select
				class="w-100"
				label="Portafolio"
				placeholder="Selecciona un portafolio"
				[form]="form"
				[options]="selectOpt"
				controlName="portfolio"
				(onChangeSelection)="onSelectionChange($event)"
				>
			</app-select>
			<app-select
				class="w-100"
				label="Elija una membresia"
				placeholder="Selecciona una membresia"
				[form]="form"
				[options]="membershipOpt"
				controlName="membership"
				(onChangeSelection)="onSelectionMembership($event)"
			>
			</app-select>
			<div class="d-flex flex-row justify-content-center gap-3">
				<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
					Cancelar
				</button>
				<button
					class="btn btn-secondary"
					type="button"
					[disabled]="form.invalid"
					(click)="screen = 2"
				>
					Aceptar
				</button>
			</div>
		</div>
	</ng-container>

	<ng-container *ngIf="screen === 2">
		<div class="w-100 d-flex flex-column gap-3">
			<div class="d-flex flex-row gap-4" style="align-self: center;">
				<h1 class="fs-6 fw-medium m-0 text-black pb-2">Liquidación de membresía</h1>
			</div>
			<label for="info" class="text-black font-weight-bold" style="font-size: 16px;">Información del usuario</label>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Usuario:</span>
				<span class="fw-medium">{{ currentUser.username }}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Nombre y Apellido:</span>
				<span class="fw-medium">{{ currentUser.lastName + ' ' + currentUser.name }}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Portafolio:</span>
				<span class="fw-medium">{{ selectedPortfolio.content }}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Membresía:</span>
				<span class="fw-medium">{{selectedMembership.content}}</span>
			</div>
			<app-select
				class="w-100"
				label="Portafolio"
				placeholder="Seleccione motivo de liquidación:"
				[form]="form2"
				[options]="selectMotivoLiqOpt"
				controlName="movitoLiq"
				(onChangeSelection)="onSelectionPortfolio($event)"
				>
			</app-select>
			<div class="alert alert-warning d-flex align-items-center" role="alert">
				<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5H11V7H9V5ZM9 9H11V15H9V9ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#EFBD0C"/>
				</svg>
				<div>
					<p>Observaciones:<br>
					&nbsp;&nbsp;-Tener en cuenta que la penalidad para las membresias de {{ selectedPortfolio.content }} es del 55%</p>
				</div>
			</div>
			
			<div class="d-flex flex-row justify-content-center gap-3">
				<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
					Cancelar
				</button>
				<button
					class="btn btn-secondary"
					type="button"
					[disabled]="form2.invalid"
					(click)="screen = 3"
				>
					Aceptar
				</button>
			</div>
		</div>
	</ng-container>

	<ng-container *ngIf="screen === 3">
		<div class="w-100 d-flex flex-column gap-3">
			<div class="d-flex flex-row gap-4" style="align-self: center;">
				<h1 class="fs-6 fw-medium m-0 text-black pb-2">Detalle de saldo a favor</h1>
			</div>
			<label for="info" class="text-black font-weight-bold" style="font-size: 16px;">Información del usuario</label>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Monto pagado:</span>
				<span class="fw-medium">{{totalAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Penalidad:</span>
				<span class="fw-medium">{{penalityAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center" style="color: #45B36B !important;" >
				<span>Saldo a favor:</span>
				<span class="fw-medium">{{favorAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Observación:</span>
				<span class="fw-medium">{{selectedMotivo.content}}</span>
			</div>
			<div class="alert alert-warning d-flex align-items-center" role="alert">
				<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5H11V7H9V5ZM9 9H11V15H9V9ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#EFBD0C"/>
				</svg>
				<div>
					<p>Observaciones:<br>
					&nbsp;&nbsp;-Tener en cuenta que la penalidad para las membresias de {{ selectedPortfolio.content }} es del 55%</p>
				</div>
			</div>
			<div class="d-flex flex-row justify-content-center gap-3">
				<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
					Cancelar
				</button>
				<button
					class="btn btn-secondary"
					type="button"
					[disabled]="form2.invalid"
					(click)="screen = 4"
				>
					Aceptar
				</button>
			</div>
		</div>
	</ng-container>

	<ng-container *ngIf="screen === 4">
		<div class="w-100 d-flex flex-column gap-3">
			<div class="d-flex flex-row gap-4" style="align-self: center;">
				<h1 class="fs-6 fw-medium m-0 text-black pb-2">Solicito la devolución del dinero</h1>
			</div>
			<app-radios-large
				[form]="form3"
				controlName="refundMoney"
				[verticalLayout]="false"
				[horizontalLayout]="true"
				[options]="refundMoneyOpt"
				class="w-100"
				(changeSelection)="onChangeTypeLiq($event)"
			/>
			<div class="alert alert-success d-flex align-items-center" role="alert">
				<svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5.80078H11V7.80078H9V5.80078ZM9 9.80078H11V15.8008H9V9.80078ZM10 0.800781C4.48 0.800781 0 5.28078 0 10.8008C0 16.3208 4.48 20.8008 10 20.8008C15.52 20.8008 20 16.3208 20 10.8008C20 5.28078 15.52 0.800781 10 0.800781ZM10 18.8008C5.59 18.8008 2 15.2108 2 10.8008C2 6.39078 5.59 2.80078 10 2.80078C14.41 2.80078 18 6.39078 18 10.8008C18 15.2108 14.41 18.8008 10 18.8008Z" fill="#2B9CD9"/>
				</svg>
				<div>
					<p>&nbsp;&nbsp;Observaciones:<br>
					&nbsp;&nbsp;El plazo para que se ejecute la liquidación en el sistema y se genere en vale es de 15 a 20 días</p>
				</div>
			</div>
			<div class="d-flex flex-row justify-content-center gap-3">
				<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
					Cancelar
				</button>
				<button
					class="btn btn-secondary"
					type="button"
					[disabled]="form2.invalid"
					(click)="screen = 5"
				>
					Aceptar
				</button>
			</div>
		</div>
	</ng-container>

	<ng-container *ngIf="screen === 5">
		<div class="w-100 d-flex flex-column gap-3">
			<div class="d-flex flex-row gap-4" style="align-self: center;">
				<h1 class="fs-6 fw-medium m-0 text-black pb-2">Detalle de liquidación</h1>
			</div>
			<div class="alert alert-success d-flex align-items-center" role="alert">
				<svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5.80078H11V7.80078H9V5.80078ZM9 9.80078H11V15.8008H9V9.80078ZM10 0.800781C4.48 0.800781 0 5.28078 0 10.8008C0 16.3208 4.48 20.8008 10 20.8008C15.52 20.8008 20 16.3208 20 10.8008C20 5.28078 15.52 0.800781 10 0.800781ZM10 18.8008C5.59 18.8008 2 15.2108 2 10.8008C2 6.39078 5.59 2.80078 10 2.80078C14.41 2.80078 18 6.39078 18 10.8008C18 15.2108 14.41 18.8008 10 18.8008Z" fill="#2B9CD9"/>
				</svg>
				<div>
					<p>&nbsp;&nbsp;Observaciones:<br>
					&nbsp;&nbsp;El plazo para que se ejecute la liquidación en el sistema y se genere en vale es de 15 a 20 días</p>
				</div>
			</div>
			<label for="info" class="text-black font-weight-bold" style="font-size: 16px;">Información del usuario</label>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Paquete a liquidar:</span>
				<span class="fw-medium">{{ selectedPortfolio.content }} - Membresía {{selectedMembership.content}}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Devolución de dinero:</span>
				<span class="fw-medium">{{ selectedReturnType.content }}</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Monto pagado:</span>
				<span class="fw-medium">{{totalAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Penalidad:</span>
				<span class="fw-medium">{{penalityAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center" style="color: #45B36B !important;" >
				<span>Saldo a favor:</span>
				<span class="fw-medium">{{favorAmount}} USD</span>
			</div>
			<div class="w-100 d-flex flex-row justify-content-between align-items-center">
				<span>Observación:</span>
				<span class="fw-medium">{{selectedMotivo.content}}</span>
			</div>
			<div class="d-flex flex-row justify-content-center gap-3">
				<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
					Cancelar
				</button>
				<button
					class="btn btn-secondary"
					type="button"
					[disabled]="form2.invalid"
					(click)="screen = 6"
				>
					Continuar
				</button>
			</div>
		</div>
	</ng-container>

	<!--confirm traspaso-->
	<div class="d-flex flex-column gap-3" *ngIf="screen === 6">
		<div class="d-flex flex-row gap-4" style="align-self: center;">
			<h1 class="fs-6 fw-medium m-0 text-black pb-2">Liquidación de membresía</h1>
		</div>
		<div class="w-100 d-flex flex-row justify-content-between align-items-center">
			<img style="margin-left: 42%;" src="../../../../../../../../../../../assets/icons/signal.svg" alt="">
		</div>
		<div class="w-100 d-flex flex-row justify-content-between align-items-center">
			<h3 class="fs-6 fw-medium m-0 text-black pb-2" style="width: 100% !important; text-align: center;">¿Desea liquidar su membresía de <b>{{selectedMembership.content}}</b> del paquete <b>{{ selectedPortfolio.content }}</b>?</h3>
		</div>
		
		<div class="d-flex flex-row justify-content-center gap-3">
			<button class="btn btn-outline-secondary" type="button" (click)="instanceModal.close()">
				Cancelar
			</button>
			<button
				class="btn btn-secondary"
				type="button"
				[disabled]="form3.invalid"
				(click)="saveTransferLiquidation()"
			>
				Solicitar
			</button>
		</div>
	</div>

	<!--confirmiation message-->
	<div class="d-flex flex-column gap-3" *ngIf="screen === 7">
		<div class="d-flex flex-row gap-4" style="align-self: center;">
			<h1 class="fs-6 fw-medium m-0 text-black pb-2">Notificación</h1>
		</div>
		<div class="w-100 d-flex flex-row justify-content-between align-items-center">
			<img style="margin-left: 45%;" src="../../../../../../../../../../../assets/icons/success.svg" alt="">
		</div>
		<div class="w-100 d-flex flex-row justify-content-between align-items-center">
			<h4 class="fs-6 fw-medium m-0 text-black pb-2"  style="width: 100% !important; text-align: center;">Tu solicitud de liquidación de membresia esta siendo validada. Le enviaremos un correo.</h4>
		</div>
	</div>
</app-modal>
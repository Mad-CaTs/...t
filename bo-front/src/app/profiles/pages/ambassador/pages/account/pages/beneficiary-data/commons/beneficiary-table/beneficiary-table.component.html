<div class="d-flex flex-column gap-3 mt-3">
    <div class="d-flex flex-row justify-content-between align-items-center">
        <div class="d-flex flex-column w-80">
            <label for="membresias" class="control-label" style="margin-bottom:6px;">Tipo de membresía</label>
            <select
                name="membresias"
                id="membresias"
                [(ngModel)]="subscriptionId"
                (ngModelChange)="onMembershipModelChange($event)"
                class="styled-input styled-input-pass custom-nationality-select">

                <option [ngValue]="0" disabled> Selecciona una membresía </option>
                <option *ngFor="let membership of optMemberships" [ngValue]="membership.value">
                    {{ membership.content }}
                </option>
            </select>
            <!-- <select name="membresias" id="membresias" (change)="onChangeMembership($event)"
                class="styled-input styled-input-pass custom-nationality-select">
                <option value="0" disabled selected> Selecciona una membresía </option>
                <option *ngFor="let membership of optMemberships" [value]="membership.value">
                    {{ membership.content }}
                </option>
            </select> -->
        </div>

        <div class="px-3" style="flex:1; text-align:right;">
            <span *ngIf="subscriptionId && atLimit" class="text-danger" style="font-weight:600;">
            Su paquete ha llegado al límite
            <!-- Su paquete ha llegado al límite ({{ usedSlots }}/{{ maxSlots }}). -->
            </span>
            <span *ngIf="subscriptionId && !atLimit" class="text-black">
            Disponible para agregar ({{ freeSlots }}) beneficiario{{ freeSlots === 1 ? '' : 's' }}
            </span>
        </div>

        <button [disabled]="disabledAdd" class="btn btn-secondary px-3 fs-12 w-30" style="height: fit-content"
            (click)="save()"> Agregar
        </button>

        
    </div>
    <app-table class="w-100" [customRows]="true" [headers]="headers" [hasCheckbox]="false" [firstEmpty]="true"
        [minWidth]="1000" [minWidthHeader]="minWidthHeader" [loading]="isLoading" [hasData]="table.data.length > 0">
        <tr class="d-flex flex-row align-items-center" *ngFor="let d of table.data; let i = index">
            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[0]">{{ i + 1 | number:'2.0-0' }}
            </td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[1]">{{ d.name }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[2]">{{ d.lastName }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[3]">{{ d.nroDocument }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[4]">{{ d.ageDate |
                date:'dd/MM/yyyy' }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[5]">{{ d.age ?? '—' }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[6]">{{ d.email }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[7]">{{ d.expirationDate |
                date:'dd/MM/yyyy' }}</td>

            <td class="fs-6 py-2 px-2 text-center" [style.min-width.px]="minWidthHeader[8]">{{ d.subscription || '-' }}</td>
        </tr>
    </app-table>
    <div class="table-footnote">
        <div class="table-footnote__icon">i</div>
        <div class="table-footnote__content">
            <div class="table-footnote__title">Información importante</div>
            <div class="table-footnote__text">
                Recuerde una vez registrado se podrá editar dentro de los próximos 12 meses,
                si desea editar la información deberá comunicarse con el canal de soporte.
            </div>
        </div>
    </div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<app-modal title="Detalle">
  <div style="display: flex; flex-direction: column; gap: 15px; width: 100%; padding: 20px; font-family: Arial, sans-serif;">
    <h6 style="font-weight: bold; font-size: 16px; margin: 0;">Información del movimiento</h6>

    <div style="display: flex; flex-direction: column; gap: 10px;">
      <div style="display: flex; flex-direction: row; justify-content: space-between;">
        <span style="color: #6c757d; font-size: 14px; width: 50%;">Fecha y hora del movimiento</span>
        <span style="color: #000; font-size: 14px; width: 50%; text-align: right;">{{ getFormattedDateTime() }}</span>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between;">
        <span style="color: #6c757d; font-size: 14px; width: 50%;">Tipo de operación</span>
        <span style="color: #000; font-size: 14px; width: 50%; text-align: right;">{{ data.returnedType }}</span>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between;">
        <span style="color: #6c757d; font-size: 14px; width: 50%;">Descripción</span>
        <span style="color: #000; font-size: 14px; width: 50%; text-align: right;">{{ data.description }}</span>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
        <span style="color: #6c757d; font-size: 14px; width: 50%;">Monto</span>
        <div style="display: flex; align-items: center; width: 50%; justify-content: flex-end;">
          <span [ngStyle]="{'color': data.amount < 0 ? '#dc3545' : '#333333'}" style="font-weight: bold; font-size: 14px; margin-right: 5px;">$ {{ data.amount.toFixed(2) }}</span>
          <span *ngIf="data.amount < 0" (click)="toggleDetails()" style="cursor: pointer; font-size: 14px;">
            <i class="fas" [ngClass]="{'fa-chevron-down': !showDetails, 'fa-chevron-up': showDetails}"></i>
          </span>
        </div>
      </div>

      <!-- Conditional section for negative amounts and toggle state -->
      <div *ngIf="data.amount < 0 && showDetails" style="display: flex; flex-direction: column; gap: 10px;">
        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <span style="color: #6c757d; font-size: 14px; width: 50%;">Pago Financiado</span>
          <span style="color: #000; font-size: 14px; width: 50%; text-align: right;">$ 0.00</span>
        </div>

        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <span style="color: #6c757d; font-size: 14px; width: 50%;">Inicial Fraccionado</span>
          <span style="color: #dc3545; font-size: 14px; width: 50%; text-align: right;">$ -{{ getAbsoluteAmount(data.initialFraction || 0) }}</span>
        </div>

        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <span style="color: #6c757d; font-size: 14px; width: 50%;">Servicio de GPS</span>
          <span style="color: #dc3545; font-size: 14px; width: 50%; text-align: right;">$ -{{ getAbsoluteAmount(data.gpsService || 0) }}</span>
        </div>

        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <span style="color: #6c757d; font-size: 14px; width: 50%;">Seguro</span>
          <span style="color: #000; font-size: 14px; width: 50%; text-align: right;">$ 0.00</span>
        </div>
      </div>
    </div>

    <div style="display: flex; justify-content: center; margin-top: 20px;">
      <button type="button" style="background-color: #ff6200; color: white; border: none; padding: 10px 20px; border-radius: 5px; font-size: 14px; cursor: pointer;" (click)="instanceModal.close()">Entendido</button>
    </div>
  </div>
</app-modal>

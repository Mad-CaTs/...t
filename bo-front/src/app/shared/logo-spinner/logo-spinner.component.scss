// src/app/shared/logo-spinner/logo-spinner.component.scss
/* ─────────────────────────────────────────────────────────
 *  LOGO SPINNER — inline + modal-fullscreen refinado
 *  • Logo SVG (left/right + spin) CW – 1.8 s
 *  • Halo pulsante (::after) — 1.8 s
 *  • Anillo exterior (::before) — 2.4 s reverse
 *  • Motion-safe y WCAG OK
 * ───────────────────────────────────────────────────────── */

/* ---------- variables ---------- */
$brand              : #0090BC;
$halo-opacity-min   : .15;
$halo-opacity-max   : .40;

/* ---------- contenedor ---------- */
.spinner-wrapper {
  width: 100%;
  aspect-ratio: 1 / 1;
  margin: auto;
  display: flex;
  pointer-events: none;
  justify-content: center;
  align-items: center;
  min-width: 0;
  position: relative;               /* para pseudo-elements */

  /* ───── modo fullscreen ───── */
  &.fullscreen {
    width : clamp(64px, 8vw, 120px);
    height: clamp(64px, 8vw, 120px);
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;

    z-index: 1000;
    pointer-events: all;

    /* halo pulsante */
    &.loading::after {
      content: '';
      position: absolute; inset: 0;
      border-radius: 50%;
      box-shadow: 0 0 0 0 $brand;
      opacity: $halo-opacity-min;
      animation: haloGlow 1.8s ease-in-out infinite;
      pointer-events: none;
    }

    /* anillo exterior giratorio */
    &.loading::before {
      content: '';
      position: absolute;
      inset: -3px;                  /* grosor del anillo */
      border-radius: 50%;
      background: conic-gradient($brand 0 30%, transparent 30% 100%);
      animation: ringSpin 2.4s linear infinite reverse;
      mask: radial-gradient(farthest-side, transparent 78%, #000 79%);
      pointer-events: none;
    }
  }

  /* slot del SVG */
  > div {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
}

/* ---------- animaciones logo ---------- */
.spinner-wrapper.loading ::ng-deep svg    { animation: spin 1.8s linear infinite; }
.spinner-wrapper.loading ::ng-deep .left  { animation: leftSpin  1.8s ease-in-out infinite both; transform-origin: center; }
.spinner-wrapper.loading ::ng-deep .right { animation: rightSpin 1.8s ease-in-out infinite both; transform-origin: center; }

/* ---------- keyframes ---------- */
/* halo */
@keyframes haloGlow {
  0%, 100% { box-shadow: 0 0 0 0 $brand;      opacity: $halo-opacity-min; }
  50%      { box-shadow: 0 0 12px 4px $brand; opacity: $halo-opacity-max; }
}

/* anillo exterior */
@keyframes ringSpin { 0% { transform: rotate(0); } 100% { transform: rotate(-360deg); } }

/* logo — ambos CW */
@keyframes leftSpin  { 0% { transform: rotate(0); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
@keyframes rightSpin { 0% { transform: rotate(0); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
@keyframes spin      { 0% { transform: rotate(0); } 100% { transform: rotate(360deg); } }

/* ---------- accesibilidad ---------- */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
}

/* Disables motion if user prefers reduced movement */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; }
}

<app-modal [title]="title">
    <form class="form w-100" [formGroup]="loginForm" novalidate="novalidate" id="kt_login_signin_form"
        (ngSubmit)="submit()">
        <ng-container *ngIf="hasError">
            <div class="mb-lg-15 alert alert-danger">
                <div class="alert-text font-weight-bold">La información es incorrecta</div>
            </div>
        </ng-container>
        <ng-container *ngIf="hasNoPermission">
            <div class="mb-lg-15 alert alert-danger">
                <div class="alert-text font-weight-bold">Cuenta sin permisos</div>
            </div>
        </ng-container>
        <div class="fv-row mb-10">
            <label class="form-label fs-6 fw-bolder text-dark">Usuario</label>
            <input class="form-control " type="email" name="email" formControlName="email" autocomplete="off"
                placeholder="Ingresar usuario" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'required',
				message: 'El nombre de usuario es requerido',
				control: loginForm.controls['email']
			}"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'email',
				message: 'El nombre de usuario es invalido',
				control: loginForm.controls['email']
			}"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'minLength',
				message: 'Debe tener al menos 3 caracteres',
				control: loginForm.controls['email']
			}"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'maxLength',
				message: 'Debe tener como maximo 360 caracteres',
				control: loginForm.controls['email']
			}"></ng-container>
        </div>
        <div class="fv-row mb-10">
            <div class="d-flex justify-content-between mt-n5">
                <div class="d-flex flex-stack mb-2">
                    <label class="form-label fw-bolder text-dark fs-6 mb-0">Contraseña</label>
                </div>
            </div>
            <div class="input-group">
                <input class="form-control form-control-lg " type="password" name="password" autocomplete="off"
                    formControlName="password" placeholder="Ingresar contraseña"
                    [type]="hidePassword ? 'password' : 'text'" />
                <span (click)="togglePasswordVisibility()" class="input-group-text">
                    <i [ngClass]="hidePassword ? 'fa fa-eye' : 'fa fa-eye-slash'"></i>
                </span>
            </div>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'required',
				message: 'La contraseña es requerida',
				control: loginForm.controls['password']
			}"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'minlength',
				message: 'La contraseña debe tener al menos 3 caracteres',
				control: loginForm.controls['password']
			}"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
				validation: 'maxLength',
				message: 'La contraseña debe tener como maximo 100 caracteres',
				control: loginForm.controls['password']
			}"></ng-container>
        </div>
        <div class="text-center mt-5">
            <button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-secondary w-50 mb-5"
                [disabled]="loginForm.invalid">
                <ng-container *ngIf="isLoading$ | async">
                    <span class="indicator-progress" [style.display]="'block'">
                        Por favor espere...
                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                    </span>
                </ng-container>
                <ng-container *ngIf="!(isLoading$ | async)">
                    <span class="indicator-label">Confirmar</span>
                </ng-container>
            </button>

        </div>
    </form>
    <ng-template #formError let-control="control" let-message="message" let-validation="validation">
        <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
            <div class="fv-plugins-message-container">
                <span role="alert">
                    {{ message }}
                </span>
            </div>
        </ng-container>
    </ng-template>
</app-modal>
<app-table
  class="card card-xxl-stretch mb-5"
  [noCheckboxes]="true"
  [customRows]="true"
  [headers]="headers"
>
  <tr *ngFor="let r of rows">
    <td>
      <div class="d-flex flex-column">
        <span class="fw-bold fs-7">{{ r.portfolio }}</span>
      </div>
    </td>

    <td>
      <div class="d-flex flex-column">
        <span class="fw-bold fs-7">{{ r.packageName }}</span>
      </div>
    </td>

    <td>
      <ng-container *ngIf="r.rangeText && r.rangeText !== '-'; else noRange">
        <span class="badge-pill" [ngClass]="badgeClass(r.rangeId)">{{ r.rangeText }}</span>
      </ng-container>
      <ng-template #noRange>
        <span class="fw-bold fs-7">-</span>
      </ng-template>
    </td>

    <td>
      <div class="d-flex flex-column">
        <span class="fw-bold fs-7" *ngIf="!editing[r.id]">{{ r.beneficiaries }}</span>

        <input
          *ngIf="editing[r.id]"
          type="number"
          class="form-control"
          min="0"
          [ngModel]="buffer[r.id]"
          (ngModelChange)="buffer[r.id] = $event"
          style="max-width: 110px"
        />
      </div>
    </td>

    <td class="text-center">
      <div class="d-flex align-items-center gap-3">
        <button
          *ngIf="!editing[r.id]"
          type="button"
          class="icon-btn"
          title="Editar"
          (click)="startEdit(r)"
        >
          <i class="bi bi-pencil fs-3"></i>
        </button>

        <ng-container *ngIf="editing[r.id]">
          <button type="button" class="btn btn-secondary btn-sm" (click)="save(r)">
            Guardar
          </button>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="cancel(r)">
            Cancelar
          </button>
        </ng-container>
      </div>
    </td>
  </tr>
</app-table>
